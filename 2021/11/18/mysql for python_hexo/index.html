<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>mysql for python | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="mysql for pythonmysql数据库是一种按照数据结构来组织、存储和管理数据的仓库，一般数据库软件均为C&#x2F;S架构，目前数据库软件分为两种，关系型数据库与非关系型数据，常见的关系型数据库有：mysql(mariadb),oracle,pgsql等，非关系型数据库有mongodb,redis(也是消息队列)。 mysql是目前互联网公司中最常用的关系型数据库之一。 存储引擎日常生活中文件格">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql for python">
<meta property="og:url" content="http://example.com/2021/11/18/mysql%20for%20python_hexo/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="mysql for pythonmysql数据库是一种按照数据结构来组织、存储和管理数据的仓库，一般数据库软件均为C&#x2F;S架构，目前数据库软件分为两种，关系型数据库与非关系型数据，常见的关系型数据库有：mysql(mariadb),oracle,pgsql等，非关系型数据库有mongodb,redis(也是消息队列)。 mysql是目前互联网公司中最常用的关系型数据库之一。 存储引擎日常生活中文件格">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-11-18T09:24:46.000Z">
<meta property="article:modified_time" content="2021-11-19T03:54:22.727Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="python">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-mysql for python_hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/11/18/mysql%20for%20python_hexo/" class="article-date">
  <time datetime="2021-11-18T09:24:46.000Z" itemprop="datePublished">2021-11-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      mysql for python
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="mysql-for-python"><a href="#mysql-for-python" class="headerlink" title="mysql for python"></a>mysql for python</h1><h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p>数据库是一种按照数据结构来组织、存储和管理数据的仓库，一般数据库软件均为C/S架构，目前数据库软件分为两种，关系型数据库与非关系型数据，常见的关系型数据库有：mysql(mariadb),oracle,pgsql等，非关系型数据库有mongodb,redis(也是消息队列)。</p>
<p>mysql是目前互联网公司中最常用的关系型数据库之一。</p>
<h3 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h3><p>日常生活中文件格式有很多中，并且针对不同的文件格式会有对应不同存储方式和处理机制(txt,pdf,word,mp4…)</p>
<p>针对不同的数据应该有对应的不同的处理机制来存储</p>
<p>存储引擎就是不同的处理机制</p>
<p><strong>MySQL主要存储引擎</strong></p>
<ul>
<li><p>Innodb</p>
<p>  是MySQL5.5版本及之后默认的存储引擎</p>
<p>  存储数据更加的安全</p>
</li>
<li><p>myisam</p>
<p>  是MySQL5.5版本之前默认的存储引擎</p>
<p>  速度要比Innodb更快 但是我们更加注重的是数据的安全</p>
</li>
<li><p>memory</p>
<p>  内存引擎(数据全部存放在内存中) 断电数据丢失</p>
</li>
<li><p>blackhole</p>
<p>  无论存什么，都立刻消失(黑洞)</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># 查看所有的存储引擎</span></span><br><span class="line"><span class="string">show engines;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 不同的存储引擎在存储表的时候 异同点</span></span><br><span class="line"><span class="string">create table t1(id int) engine=innodb;</span></span><br><span class="line"><span class="string">create table t2(id int) engine=myisam;</span></span><br><span class="line"><span class="string">create table t3(id int) engine=blackhole;</span></span><br><span class="line"><span class="string">create table t4(id int) engine=memory;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 存数据</span></span><br><span class="line"><span class="string">insert into t1 values(1);</span></span><br><span class="line"><span class="string">insert into t2 values(1);</span></span><br><span class="line"><span class="string">insert into t3 values(1);</span></span><br><span class="line"><span class="string">insert into t4 values(1);</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="SQL语言"><a href="#SQL语言" class="headerlink" title="SQL语言"></a>SQL语言</h3><p>DQL：数据查询语言，用于对数据进行查询，如select<br>        DML：数据操作语言，对数据进行增加、修改、删除，如insert、update、delete<br>        TPL：事务处理语言，对事务进行处理，包括begin transaction、commit、rollback<br>        DCL：数据控制语言，进行授权与权限回收，如grant、revoke<br>        DDL：数据定义语言，进行数据库、表的管理等，如create、drop</p>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><h4 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h4><ul>
<li><p>分类</p>
<p>  TINYINT SMALLINT MEDUIMINT INT BIGINT</p>
</li>
<li><p>作用</p>
<p>  存储年龄、等级、id、号码等等</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">以TINYINT </span></span><br><span class="line"><span class="string">	是否有符号</span></span><br><span class="line"><span class="string">		默认情况下是带符号的</span></span><br><span class="line"><span class="string">	超出会如何</span></span><br><span class="line"><span class="string">		超出限制只存最大可接受值</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table t9(<span class="built_in">id</span> tinyint);</span><br><span class="line">insert into t9 values(-<span class="number">129</span>),(<span class="number">256</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 约束条件之unsigned 无符号</span></span><br><span class="line">create table t10(<span class="built_in">id</span> tinyint unsigned);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table t11(<span class="built_in">id</span> <span class="built_in">int</span>);</span><br><span class="line"><span class="comment"># int默认也是带符号的  </span></span><br><span class="line"><span class="comment"># 整型默认情况下都是带有符号的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 针对整型 括号内的宽度到底是干嘛的</span></span><br><span class="line">create table t12(<span class="built_in">id</span> <span class="built_in">int</span>(<span class="number">8</span>));</span><br><span class="line">insert into t12 values(<span class="number">123456789</span>);</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">特例:只有整型括号里面的数字不是表示限制位数</span></span><br><span class="line"><span class="string">id int(8)</span></span><br><span class="line"><span class="string">	如果数字没有超出8位 那么默认用空格填充至8位</span></span><br><span class="line"><span class="string">	如果数字超出了8位 那么有几位就存几位(但是还是要遵守最大范围)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table t13(<span class="built_in">id</span> <span class="built_in">int</span>(<span class="number">8</span>) unsigned zerofill);</span><br><span class="line"><span class="comment"># 用0填充至8位</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 总结:</span></span><br><span class="line">针对整型字段 括号内无需指定宽度 因为它默认的宽度以及足够显示所有的数据了</span><br></pre></td></tr></table></figure>

<h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><ul>
<li><p>分类</p>
<p>  FLOAT、DOUBLE、DECIMAL</p>
</li>
<li><p>作用</p>
<p>  身高、体重、薪资</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存储限制</span></span><br><span class="line"><span class="built_in">float</span>(<span class="number">255</span>,<span class="number">30</span>)  <span class="comment"># 总共255位 小数部分占30位</span></span><br><span class="line">double(<span class="number">255</span>,<span class="number">30</span>)  <span class="comment"># 总共255位 小数部分占30位</span></span><br><span class="line">decimal(<span class="number">65</span>,<span class="number">30</span>)  <span class="comment"># 总共65位 小数部分占30位</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 精确度验证</span></span><br><span class="line">create table t15(<span class="built_in">id</span> <span class="built_in">float</span>(<span class="number">255</span>,<span class="number">30</span>));</span><br><span class="line">create table t16(<span class="built_in">id</span> double(<span class="number">255</span>,<span class="number">30</span>));</span><br><span class="line">create table t17(<span class="built_in">id</span> decimal(<span class="number">65</span>,<span class="number">30</span>));</span><br><span class="line"><span class="string">&quot;&quot;&quot;你们在前期不要给我用反向键 所有的命令全部手敲！！！增加熟练度&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">insert into t15 values(<span class="number">1.111111111111111111111111111111</span>);</span><br><span class="line">insert into t16 values(<span class="number">1.111111111111111111111111111111</span>);</span><br><span class="line">insert into t17 values(<span class="number">1.111111111111111111111111111111</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">float</span> &lt; double &lt; decimal</span><br><span class="line"><span class="comment"># 要结合实际应用场景 三者都能使用</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="字符类型"><a href="#字符类型" class="headerlink" title="字符类型"></a>字符类型</h4><ul>
<li><p>分类</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">char</span></span><br><span class="line"><span class="string">	定长</span></span><br><span class="line"><span class="string">	char(4)	 数据超过四个字符直接报错 不够四个字符空格补全</span></span><br><span class="line"><span class="string">varchar</span></span><br><span class="line"><span class="string">	变长</span></span><br><span class="line"><span class="string">	varchar(4)  数据超过四个字符直接报错 不够有几个存几个</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table t18(name char(<span class="number">4</span>));</span><br><span class="line">create table t19(name varchar(<span class="number">4</span>));</span><br><span class="line"></span><br><span class="line">insert into t18 values(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">insert into t19 values(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 介绍一个小方法 char_length统计字段长度</span></span><br><span class="line">select char_length(name) <span class="keyword">from</span> t18;</span><br><span class="line">select char_length(name) <span class="keyword">from</span> t19;</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">首先可以肯定的是 char硬盘上存的绝对是真正的数据 带有空格的</span></span><br><span class="line"><span class="string">但是在显示的时候MySQL会自动将多余的空格剔除</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 再次修改sql_mode 让MySQL不要做自动剔除操作</span></span><br><span class="line"><span class="built_in">set</span> <span class="keyword">global</span> sql_mode = <span class="string">&#x27;STRICT_TRANS_TABLES,PAD_CHAR_TO_FULL_LENGTH&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="char与varchar对比"><a href="#char与varchar对比" class="headerlink" title="char与varchar对比"></a>char与varchar对比</h4>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">char</span></span><br><span class="line"><span class="string">	缺点:浪费空间</span></span><br><span class="line"><span class="string">	优点:存取都很简单</span></span><br><span class="line"><span class="string">		直接按照固定的字符存取数据即可</span></span><br><span class="line"><span class="string">		jason egon alex wusir tank </span></span><br><span class="line"><span class="string">		存按照五个字符存 取也直接按照五个字符取</span></span><br><span class="line"><span class="string">		</span></span><br><span class="line"><span class="string">varchar</span></span><br><span class="line"><span class="string">	优点:节省空间</span></span><br><span class="line"><span class="string">	缺点:存取较为麻烦</span></span><br><span class="line"><span class="string">		1bytes+jason 1bytes+egon 1bytes+alex 1bytes+tank </span></span><br><span class="line"><span class="string">		</span></span><br><span class="line"><span class="string">		存的时候需要制作报头</span></span><br><span class="line"><span class="string">		取的时候也需要先读取报头 之后才能读取真实数据</span></span><br><span class="line"><span class="string">		</span></span><br><span class="line"><span class="string">以前基本上都是用的char 其实现在用varchar的也挺多</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">补充:</span><br><span class="line">    进来公司之后你完全不需要考虑字段类型和字段名</span><br><span class="line">    因为产品经理给你发的邮件上已经全部指明了</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="时间类型"><a href="#时间类型" class="headerlink" title="时间类型"></a>时间类型</h4><ul>
<li><p>分类</p>
<p>  date:年月日 2020-5-4</p>
<p>  datetime:年月日时分秒  2020-5-4 11:11:11</p>
<p>  time:时分秒11:11:11</p>
<p>  Year:2020</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">    name varchar(<span class="number">16</span>),</span><br><span class="line">    born_year year,</span><br><span class="line">    birth date,</span><br><span class="line">    study_time time,</span><br><span class="line">    reg_time datetime</span><br><span class="line">);</span><br><span class="line">insert into student values(<span class="number">1</span>,<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;1880&#x27;</span>,<span class="string">&#x27;1880-11-11&#x27;</span>,<span class="string">&#x27;11:11:11&#x27;</span>,<span class="string">&#x27;2020-11-11 11:11:11&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="枚举与集合类型"><a href="#枚举与集合类型" class="headerlink" title="枚举与集合类型"></a>枚举与集合类型</h4><ul>
<li><p>分类</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">枚举(enum)  多选一</span></span><br><span class="line"><span class="string">集合(set)   多选多</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>具体使用</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">create table user(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">    name char(<span class="number">16</span>),</span><br><span class="line">    gender enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;others&#x27;</span>)</span><br><span class="line">);</span><br><span class="line">insert into user values(<span class="number">1</span>,<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;male&#x27;</span>);  正常</span><br><span class="line">insert into user values(<span class="number">2</span>,<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;xxxxooo&#x27;</span>);  报错</span><br><span class="line"><span class="comment"># 枚举字段 后期在存数据的时候只能从枚举里面选择一个存储 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table teacher(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">    name char(<span class="number">16</span>),</span><br><span class="line">    gender enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;others&#x27;</span>),</span><br><span class="line">    hobby <span class="built_in">set</span>(<span class="string">&#x27;read&#x27;</span>,<span class="string">&#x27;DBJ&#x27;</span>,<span class="string">&#x27;hecha&#x27;</span>)</span><br><span class="line">);</span><br><span class="line">insert into teacher values(<span class="number">1</span>,<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;read&#x27;</span>);  正常</span><br><span class="line">insert into teacher values(<span class="number">2</span>,<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;DBJ,hecha&#x27;</span>);  正常</span><br><span class="line">insert into teacher values(<span class="number">3</span>,<span class="string">&#x27;tank&#x27;</span>,<span class="string">&#x27;others&#x27;</span>,<span class="string">&#x27;生蚝&#x27;</span>); 报错</span><br><span class="line"><span class="comment"># 集合可以只写一个  但是不能写没有列举的</span></span><br></pre></td></tr></table></figure>

<p>  <strong>总结</strong></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">字段类型</span></span><br><span class="line"><span class="string">严格模式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">约束条件</span></span><br><span class="line"><span class="string">	not null</span></span><br><span class="line"><span class="string">	zerofill</span></span><br><span class="line"><span class="string">	unsigned</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="约束条件"><a href="#约束条件" class="headerlink" title="约束条件"></a>约束条件</h3><h4 id="default默认值"><a href="#default默认值" class="headerlink" title="default默认值"></a>default默认值</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 补充知识点  插入数据的时候可以指定字段</span></span><br><span class="line">create table t1(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">    name char(<span class="number">16</span>)</span><br><span class="line">);</span><br><span class="line">insert into t1(name,<span class="built_in">id</span>) values(<span class="string">&#x27;jason&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">create table t2(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">    name char(<span class="number">16</span>),</span><br><span class="line">    gender enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;others&#x27;</span>) default <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line">insert into t2(<span class="built_in">id</span>,name) values(<span class="number">1</span>,<span class="string">&#x27;jason&#x27;</span>);</span><br><span class="line">insert into t2 values(<span class="number">2</span>,<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;female&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="unique唯一"><a href="#unique唯一" class="headerlink" title="unique唯一"></a>unique唯一</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单列唯一</span></span><br><span class="line">create table t3(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> unique,</span><br><span class="line">    name char(<span class="number">16</span>)</span><br><span class="line">);</span><br><span class="line">insert into t3 values(<span class="number">1</span>,<span class="string">&#x27;jason&#x27;</span>),(<span class="number">1</span>,<span class="string">&#x27;egon&#x27;</span>);</span><br><span class="line">insert into t3 values(<span class="number">1</span>,<span class="string">&#x27;jason&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;egon&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 联合唯一</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ip和port</span></span><br><span class="line"><span class="string">单个都可以重复 但是加载一起必须是唯一的</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table t4(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">    ip char(<span class="number">16</span>),</span><br><span class="line">    port <span class="built_in">int</span>,</span><br><span class="line">    unique(ip,port)</span><br><span class="line">);</span><br><span class="line">insert into t4 values(<span class="number">1</span>,<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>);</span><br><span class="line">insert into t4 values(<span class="number">2</span>,<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>);</span><br><span class="line">insert into t4 values(<span class="number">3</span>,<span class="string">&#x27;127.0.0.2&#x27;</span>,<span class="number">8080</span>);</span><br><span class="line">insert into t4 values(<span class="number">4</span>,<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>);  报错</span><br></pre></td></tr></table></figure>

<h4 id="primary-key主键"><a href="#primary-key主键" class="headerlink" title="primary key主键"></a>primary key主键</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.单单从约束效果上来看primary key等价于not null + unique</span></span><br><span class="line"><span class="string">非空且唯一！！！</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table t5(<span class="built_in">id</span> <span class="built_in">int</span> primary key);</span><br><span class="line">insert into t5 values(null);  报错</span><br><span class="line">insert into t5 values(<span class="number">1</span>),(<span class="number">1</span>);  报错</span><br><span class="line">insert into t5 values(<span class="number">1</span>),(<span class="number">2</span>); </span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">2.它除了有约束效果之外 它还是Innodb存储引擎组织数据的依据</span></span><br><span class="line"><span class="string">Innodb存储引擎在创建表的时候必须要有primary key</span></span><br><span class="line"><span class="string">因为它类似于书的目录 能够帮助提示查询效率并且也是建表的依据</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 1 一张表中有且只有一个主键 如果你没有设置主键 那么会从上往下搜索直到遇到一个非空且唯一的字段将它自动升级为主键</span></span><br><span class="line">create table t6(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">    name char(<span class="number">16</span>),</span><br><span class="line">    age <span class="built_in">int</span> <span class="keyword">not</span> null unique,</span><br><span class="line">    addr char(<span class="number">32</span>) <span class="keyword">not</span> null unique</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2 如果表中没有主键也没有其他任何的非空且唯一字段 那么Innodb会采用自己内部提供的一个隐藏字段作为主键，隐藏意味着你无法使用到它 就无法提示查询速度</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 一张表中通常都应该有一个主键字段 并且通常将id/uid/sid字段作为主键</span></span><br><span class="line"><span class="comment"># 单个字段主键</span></span><br><span class="line">create table t5(</span><br><span class="line">    <span class="built_in">id</span> <span class="built_in">int</span> primary key</span><br><span class="line">	name char(<span class="number">16</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment"># 联合主键(多个字段联合起来作为表的主键 本质还是一个主键)</span></span><br><span class="line">create table t7(</span><br><span class="line">    ip char(<span class="number">16</span>),</span><br><span class="line">    port <span class="built_in">int</span>,</span><br><span class="line">    primary key(ip,port)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">也意味着 以后我们在创建表的时候id字段一定要加primary key</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="auto-increment自增"><a href="#auto-increment自增" class="headerlink" title="auto_increment自增"></a>auto_increment自增</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当编号特别多的时候 人为的去维护太麻烦</span></span><br><span class="line">create table t8(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name char(<span class="number">16</span>)</span><br><span class="line">);</span><br><span class="line">insert into t8(name) values(<span class="string">&#x27;jason&#x27;</span>),(<span class="string">&#x27;egon&#x27;</span>),(<span class="string">&#x27;kevin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意auto_increment通常都是加在主键上的 不能给普通字段加</span></span><br><span class="line">create table t9(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name char(<span class="number">16</span>),</span><br><span class="line">    cid <span class="built_in">int</span> auto_increment</span><br><span class="line">);</span><br><span class="line">ERROR <span class="number">1075</span> (<span class="number">42000</span>): Incorrect table definition; there can be only one auto column <span class="keyword">and</span> it must be defined <span class="keyword">as</span> a key</span><br></pre></td></tr></table></figure>

<p><strong>结论</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">以后在创建表的id(数据的唯一标识id、uid、sid)字段的时候</span></span><br><span class="line"><span class="string">id int primary key auto_increment</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>补充</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delete <span class="keyword">from</span> t1  删除表中数据后 主键的自增不会停止</span><br><span class="line"></span><br><span class="line">truncate t1  清空表数据并且重置主键</span><br></pre></td></tr></table></figure>

<h3 id="表与表之间建关系"><a href="#表与表之间建关系" class="headerlink" title="表与表之间建关系"></a>表与表之间建关系</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">定义一张员工表 表中有很多字段</span></span><br><span class="line"><span class="string">id name gender dep_name dep_desc</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 1 该表的组织结构不是很清晰(可忽视)</span></span><br><span class="line"><span class="comment"># 2 浪费硬盘空间(可忽视)</span></span><br><span class="line"><span class="comment"># 3 数据的扩展性极差(无法忽视的)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如何优化？</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;上述问题就类似于你将所有的代码都写在了一个py文件中&quot;&quot;&quot;</span></span><br><span class="line">将员工表拆分  员工表和部门表</span><br></pre></td></tr></table></figure>

<h4 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	外键就是用来帮助我们建立表与表之间关系的，对外键字段的值进行更新和插入时会和引用表中字段的数据进行验证，数据如果不合法则更新和插入会失败，保证数据的有效性</span></span><br><span class="line"><span class="string">	添加外键约束: alter table 从表 add foreign key(外键字段) references 主表(主键字段);</span></span><br><span class="line"><span class="string">	删除外键约束: alter table 表名 drop foreign key 外键名;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="表关系"><a href="#表关系" class="headerlink" title="表关系"></a>表关系</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">表与表之间最多只有四种关系</span></span><br><span class="line"><span class="string">	一对多关系</span></span><br><span class="line"><span class="string">		在MySQL的关系中没有多对一一说</span></span><br><span class="line"><span class="string">		一对多 多对一 都叫一对多！！！</span></span><br><span class="line"><span class="string">	多对多关系</span></span><br><span class="line"><span class="string">	一对一关系</span></span><br><span class="line"><span class="string">	没有关系</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="一对多关系"><a href="#一对多关系" class="headerlink" title="一对多关系"></a>一对多关系</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">判断表与表之间关系的时候 前期不熟悉的情况下 一定要按照我给你的建议</span></span><br><span class="line"><span class="string">换位思考  分别站在两张表的角度考虑</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">员工表与部门表为例</span></span><br><span class="line"><span class="string">	先站在员工表</span></span><br><span class="line"><span class="string">		思考一个员工能否对应多个部门(一条员工数据能否对应多条部门数据)</span></span><br><span class="line"><span class="string">			不能！！！</span></span><br><span class="line"><span class="string">			(不能直接得出结论 一定要两张表都考虑完全)</span></span><br><span class="line"><span class="string">	再站在部门表</span></span><br><span class="line"><span class="string">		思考一个部门能否对应多个员工(一个部门数据能否对应多条员工数据)</span></span><br><span class="line"><span class="string">			能！！！</span></span><br><span class="line"><span class="string">	得出结论</span></span><br><span class="line"><span class="string">		员工表与部门表示单向的一对多</span></span><br><span class="line"><span class="string">		所以表关系就是一对多</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">foreign key</span><br><span class="line">	<span class="number">1</span> 一对多表关系   外键字段建在多的一方</span><br><span class="line">    <span class="number">2</span> 在创建表的时候 一定要先建被关联表 </span><br><span class="line">    <span class="number">3</span> 在录入数据的时候 也必须先录入被关联表</span><br><span class="line"><span class="comment"># SQL语句建立表关系</span></span><br><span class="line">create table dep(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    dep_name char(<span class="number">16</span>),</span><br><span class="line">    dep_desc char(<span class="number">32</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name char(<span class="number">16</span>),</span><br><span class="line">    gender enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;others&#x27;</span>) default <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    dep_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(dep_id) references dep(<span class="built_in">id</span>)</span><br><span class="line">);</span><br><span class="line">insert into dep(dep_name,dep_desc) values(<span class="string">&#x27;sb教学部&#x27;</span>,<span class="string">&#x27;教书育人&#x27;</span>),(<span class="string">&#x27;外交部&#x27;</span>,<span class="string">&#x27;多人外交&#x27;</span>),(<span class="string">&#x27;nb技术部&#x27;</span>,<span class="string">&#x27;技术能力有限部门&#x27;</span>);</span><br><span class="line">insert into emp(name,dep_id) values(<span class="string">&#x27;jason&#x27;</span>,<span class="number">2</span>),(<span class="string">&#x27;egon&#x27;</span>,<span class="number">1</span>),(<span class="string">&#x27;tank&#x27;</span>,<span class="number">1</span>),(<span class="string">&#x27;kevin&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改dep表里面的id字段</span></span><br><span class="line">update dep <span class="built_in">set</span> <span class="built_in">id</span>=<span class="number">200</span> where <span class="built_in">id</span>=<span class="number">2</span>;  不行</span><br><span class="line"><span class="comment"># 删除dep表里面的数据</span></span><br><span class="line">delete <span class="keyword">from</span> dep;  不行</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 先删除教学部对应的员工数据 之后再删除部门</span></span><br><span class="line">	操作太过繁琐</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2 真正做到数据之间有关系</span></span><br><span class="line">	更新就同步更新</span><br><span class="line">    删除就同步删除</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">级联更新   &gt;&gt;&gt;   同步更新</span></span><br><span class="line"><span class="string">级联删除   &gt;&gt;&gt;   同步删除</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table dep(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    dep_name char(<span class="number">16</span>),</span><br><span class="line">    dep_desc char(<span class="number">32</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name char(<span class="number">16</span>),</span><br><span class="line">    gender enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;others&#x27;</span>) default <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    dep_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(dep_id) references dep(<span class="built_in">id</span>) </span><br><span class="line">    on update cascade  <span class="comment"># 同步更新</span></span><br><span class="line">    on delete cascade  <span class="comment"># 同步删除</span></span><br><span class="line">);</span><br><span class="line">insert into dep(dep_name,dep_desc) values(<span class="string">&#x27;sb教学部&#x27;</span>,<span class="string">&#x27;教书育人&#x27;</span>),(<span class="string">&#x27;外交部&#x27;</span>,<span class="string">&#x27;多人外交&#x27;</span>),(<span class="string">&#x27;nb技术部&#x27;</span>,<span class="string">&#x27;技术能力有限部门&#x27;</span>);</span><br><span class="line">insert into emp(name,dep_id) values(<span class="string">&#x27;jason&#x27;</span>,<span class="number">2</span>),(<span class="string">&#x27;egon&#x27;</span>,<span class="number">1</span>),(<span class="string">&#x27;tank&#x27;</span>,<span class="number">1</span>),(<span class="string">&#x27;kevin&#x27;</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h4 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">图书表和作者表</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table book(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    title varchar(<span class="number">32</span>),</span><br><span class="line">    price <span class="built_in">int</span>,</span><br><span class="line">    author_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(author_id) references author(<span class="built_in">id</span>) </span><br><span class="line">    on update cascade  <span class="comment"># 同步更新</span></span><br><span class="line">    on delete cascade  <span class="comment"># 同步删除</span></span><br><span class="line">);</span><br><span class="line">create table author(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name varchar(<span class="number">32</span>),</span><br><span class="line">    age <span class="built_in">int</span>,</span><br><span class="line">    book_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(book_id) references book(<span class="built_in">id</span>) </span><br><span class="line">    on update cascade  <span class="comment"># 同步更新</span></span><br><span class="line">    on delete cascade  <span class="comment"># 同步删除</span></span><br><span class="line">);</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">按照上述的方式创建 一个都别想成功！！！</span></span><br><span class="line"><span class="string">其实我们只是想记录书籍和作者的关系</span></span><br><span class="line"><span class="string">针对多对多字段表关系 不能在两张原有的表中创建外键</span></span><br><span class="line"><span class="string">需要你单独再开设一张 专门用来存储两张表数据之间的关系</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table book(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    title varchar(<span class="number">32</span>),</span><br><span class="line">    price <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line">create table author(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name varchar(<span class="number">32</span>),</span><br><span class="line">    age <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line">create table book2author(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    author_id <span class="built_in">int</span>,</span><br><span class="line">    book_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(author_id) references author(<span class="built_in">id</span>) </span><br><span class="line">    on update cascade  <span class="comment"># 同步更新</span></span><br><span class="line">    on delete cascade,  <span class="comment"># 同步删除</span></span><br><span class="line">    foreign key(book_id) references book(<span class="built_in">id</span>) </span><br><span class="line">    on update cascade  <span class="comment"># 同步更新</span></span><br><span class="line">    on delete cascade  <span class="comment"># 同步删除</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">id name age addr phone hobby email........</span></span><br><span class="line"><span class="string">如果一个表的字段特别多 每次查询又不是所有的字段都能用得到</span></span><br><span class="line"><span class="string">将表一分为二  </span></span><br><span class="line"><span class="string">	用户表</span></span><br><span class="line"><span class="string">		用户表</span></span><br><span class="line"><span class="string">			id name age</span></span><br><span class="line"><span class="string">		用户详情表</span></span><br><span class="line"><span class="string">			id addr phone hobby email........</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">	站在用户表</span></span><br><span class="line"><span class="string">		一个用户能否对应多个用户详情   不能！！！</span></span><br><span class="line"><span class="string">	站在详情表</span></span><br><span class="line"><span class="string">		一个详情能否属于多个用户      不能！！！</span></span><br><span class="line"><span class="string">	结论:单向的一对多都不成立 那么这个时候两者之间的表关系</span></span><br><span class="line"><span class="string">		就是一对一</span></span><br><span class="line"><span class="string">		或者没有关系(好判断)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">客户表和学生表</span></span><br><span class="line"><span class="string">	在你们报名之前你们是客户端</span></span><br><span class="line"><span class="string">	报名之后是学生(期间有一些客户不会报名)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">一对一 外键字段建在任意一方都可以 但是推荐你建在查询频率比较高的表中</span><br><span class="line">create table authordetail(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    phone <span class="built_in">int</span>,</span><br><span class="line">    addr varchar(<span class="number">64</span>)</span><br><span class="line">);</span><br><span class="line">create table author(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name varchar(<span class="number">32</span>),</span><br><span class="line">    age <span class="built_in">int</span>,</span><br><span class="line">    authordetail_id <span class="built_in">int</span> unique,</span><br><span class="line">    foreign key(authordetail_id) references authordetail(<span class="built_in">id</span>) </span><br><span class="line">    on update cascade  <span class="comment"># 同步更新</span></span><br><span class="line">    on delete cascade  <span class="comment"># 同步删除</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>总结</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">表关系的建立需要用到foreign key</span></span><br><span class="line"><span class="string">	一对多</span></span><br><span class="line"><span class="string">		外键字段建在多的一方</span></span><br><span class="line"><span class="string">	多对多</span></span><br><span class="line"><span class="string">		自己开设第三张存储</span></span><br><span class="line"><span class="string">	一对一</span></span><br><span class="line"><span class="string">		建在任意一方都可以 但是推荐你建在查询频率较高的表中</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">判断表之间关系的方式</span></span><br><span class="line"><span class="string">	换位思考！！！</span></span><br><span class="line"><span class="string">		员工与部门</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">		图书与作者</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">		作者与作者详情</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法</span></span><br><span class="line">create table 表名(</span><br><span class="line">	字段名<span class="number">1</span> 类型(宽度) 约束条件,</span><br><span class="line">    字段名<span class="number">2</span> 类型(宽度) 约束条件,</span><br><span class="line">    字段名<span class="number">3</span> 类型(宽度) 约束条件</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意</span></span><br><span class="line"><span class="number">1</span> 在同一张表中字段名不能重复</span><br><span class="line"><span class="number">2</span> 宽度和约束条件是可选的(可写可不写) 而字段名和字段类型是必须的</span><br><span class="line">	约束条件写的话 也支持写多个</span><br><span class="line">    字段名<span class="number">1</span> 类型(宽度) 约束条件<span class="number">1</span> 约束条件<span class="number">2.</span>..,</span><br><span class="line">	create table t5(<span class="built_in">id</span>);  报错</span><br><span class="line"><span class="number">3</span> 最后一行不能有逗号</span><br><span class="line">	create table t6(</span><br><span class="line">        <span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">        name char,</span><br><span class="line">    );   报错</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;补充&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 宽度</span></span><br><span class="line">	一般情况下指的是对存储数据的限制</span><br><span class="line">	create table t7(name char);  默认宽度是<span class="number">1</span></span><br><span class="line">    insert into t7 values(<span class="string">&#x27;jason&#x27;</span>);</span><br><span class="line">    insert into t7 values(null);  关键字NULL</span><br><span class="line">    	针对不同的版本会出现不同的效果</span><br><span class="line">        	<span class="number">5.6</span>版本默认没有开启严格模式 规定只能存一个字符你给了多个字符，那么我会自动帮你截取</span><br><span class="line">            <span class="number">5.7</span>版本及以上或者开启了严格模式 那么规定只能存几个 就不能超，一旦超出范围立刻报错 Data too long <span class="keyword">for</span> ....</span><br><span class="line"><span class="string">&quot;&quot;&quot;严格模式到底开不开呢？&quot;&quot;&quot;</span></span><br><span class="line">MySQL5<span class="number">.7</span>之后的版本默认都是开启严格模式的</span><br><span class="line">使用数据库的准则:</span><br><span class="line">	能尽量少的让数据库干活就尽量少 不要给数据库增加额外的压力</span><br><span class="line"></span><br><span class="line"><span class="comment"># 约束条件 null  not null不能插入null</span></span><br><span class="line">create table t8(<span class="built_in">id</span> <span class="built_in">int</span>,name char <span class="keyword">not</span> null);</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">宽度和约束条件到底是什么关系</span></span><br><span class="line"><span class="string">	宽度是用来限制数据的存储</span></span><br><span class="line"><span class="string">	约束条件是在宽度的基础之上增加的额外的约束</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MySQL对大小写是不敏感的</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1 修改表名</span></span><br><span class="line"><span class="string">	alter table 表名 rename 新表名;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2 增加字段</span></span><br><span class="line"><span class="string">	alter table 表名 add 字段名 字段类型(宽度)  约束条件;</span></span><br><span class="line"><span class="string">	alter table 表名 add 字段名 字段类型(宽度)  约束条件 first;</span></span><br><span class="line"><span class="string">	alter table 表名 add 字段名 字段类型(宽度)  约束条件 after 字段名;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3 删除字段</span></span><br><span class="line"><span class="string">	alter table 表名 drop 字段名;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4 修改字段</span></span><br><span class="line"><span class="string">	alter table 表名 modify 字段名 字段类型(宽度) 约束条件;</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">	alter table 表名 change 旧字段名 新字段名 字段类型(宽度) 约束条件;</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">我们sql语句查询的结果其实也是一张虚拟表</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">create table 表名 select * <span class="keyword">from</span> 旧表;  不能复制主键 外键 ...</span><br><span class="line"></span><br><span class="line">create table new_dep2 select * <span class="keyword">from</span> dep where <span class="built_in">id</span>&gt;<span class="number">3</span>;</span><br></pre></td></tr></table></figure>



<h3 id="表查询操作"><a href="#表查询操作" class="headerlink" title="表查询操作"></a>表查询操作</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">select 查询语句</span><br><span class="line">select 字段名 from 表名</span><br><span class="line">as :给字段名或表取别名,例如	</span><br><span class="line">	select * from studentu as a </span><br><span class="line">distinct:distinct可以去除重复数据行。</span><br><span class="line">	select distinct 列1,... from 表名;</span><br><span class="line">where:条件查询</span><br><span class="line">	select * from 表名 where 条件;</span><br><span class="line">order by : 排序</span><br><span class="line">	select * from 表名 order by 列1 asc|desc [,列2 asc|desc,...]</span><br><span class="line">	例：</span><br><span class="line">		select * from students where gender=1 and is_delete=0 order by id desc;</span><br><span class="line">		asc 表示升序</span><br><span class="line">		desc 表示降序</span><br><span class="line">limit ：分页查询</span><br><span class="line">	select * from 表名 limit start,count</span><br><span class="line">	limit是分页查询关键字</span><br><span class="line">	start表示开始行索引，默认是0</span><br><span class="line">	count表示查询条数</span><br><span class="line">	例：查询前3行男生信息:</span><br><span class="line">		select * from students where gender=1 limit 0,3;</span><br><span class="line">		简写</span><br><span class="line">		select * from students where gender=1 limit 3;</span><br><span class="line">聚合函数:</span><br><span class="line">		count(col): 表示求指定列的总行数</span><br><span class="line">		max(col): 表示求指定列的最大值</span><br><span class="line">		min(col): 表示求指定列的最小值</span><br><span class="line">		sum(col): 表示求指定列的和</span><br><span class="line">		avg(col): 表示求指定列的平均值</span><br><span class="line">GROUP BY: 分组查询</span><br><span class="line">	GROUP BY 列名 [HAVING 条件表达式] [WITH ROLLUP]</span><br><span class="line">	列名: 是指按照指定字段的值进行分组。</span><br><span class="line">	HAVING 条件表达式: 用来过滤分组后的数据。</span><br><span class="line">	WITH ROLLUP：在所有记录的最后加上一条记录，显示select查询时聚合函数的统计和计算结果</span><br><span class="line">	例：</span><br><span class="line">		-- 根据gender字段来分组</span><br><span class="line">		select gender from students group by gender;</span><br><span class="line">		-- 根据name和gender字段进行分组</span><br><span class="line">		select name, gender from students group by name, gender;</span><br><span class="line">	</span><br><span class="line">	group_concat(字段名): 统计每个分组指定字段的信息集合，每个信息之间使用逗号进行分割</span><br><span class="line">	例：</span><br><span class="line">		-- 根据gender字段进行分组， 查询gender字段和分组的name字段信息</span><br><span class="line">		select gender,group_concat(name) from students group by gender;</span><br><span class="line">连接查询：</span><br><span class="line">	内连接查询：内连接根据连接查询条件取出两个表的 “交集”</span><br><span class="line">	左连接查询：左连接以左表为主根据条件查询右表数据，右表数据不存在使用null值填充。</span><br><span class="line">	右连接查询：右连接以右表为主根据条件查询左表数据，左表数据不存在使用null值填充。</span><br><span class="line">	自连接查询</span><br><span class="line">	</span><br><span class="line">	内连接查询语法格式:</span><br><span class="line">		select 字段 from 表1 inner join 表2 on 表1.字段1 = 表2.字段2</span><br><span class="line">	左连接查询语法格式:</span><br><span class="line">		select 字段 from 表1 left join 表2 on 表1.字段1 = 表2.字段2</span><br><span class="line">	右连接查询语法格式:</span><br><span class="line">		select 字段 from 表1 right join 表2 on 表1.字段1 = 表2.字段2</span><br><span class="line">	自连接查询：</span><br><span class="line">		自连接查询就是把一张表模拟成左右两张表，然后进行连表查询。</span><br><span class="line">		自连接就是一种特殊的连接方式，连接的表还是本身这张表</span><br><span class="line">		自连接查询必须对表起别名</span><br><span class="line">		自连接查询的用法:</span><br><span class="line">		select c.id, c.title, c.pid, p.title from areas as c inner join areas as p on c.pid = p.id where p.title = &#x27;山西省&#x27;;</span><br><span class="line">子查询：</span><br><span class="line">	在一个 select 语句中,嵌入了另外一个 select 语句, 那么被嵌入的 select 语句称之为子查询语句，外部那个select语句则称为主查询.</span><br><span class="line">	主查询和子查询的关系:</span><br><span class="line">	子查询是嵌入到主查询中</span><br><span class="line">	子查询是辅助主查询的,要么充当条件,要么充当数据源</span><br><span class="line">	子查询是可以独立存在的语句,是一条完整的 select 语句</span><br></pre></td></tr></table></figure>

<h4 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如何查看严格模式</span></span><br><span class="line">show variables like <span class="string">&quot;%mode&quot;</span>;</span><br><span class="line"></span><br><span class="line">模糊匹配/查询</span><br><span class="line">	关键字 like</span><br><span class="line">		%:匹配任意多个字符</span><br><span class="line">        _:匹配任意单个字符</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改严格模式</span></span><br><span class="line">	<span class="built_in">set</span> session  只在当前窗口有效</span><br><span class="line">    <span class="built_in">set</span> <span class="keyword">global</span>   全局有效</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">set</span> <span class="keyword">global</span> sql_mode = <span class="string">&#x27;STRICT_TRANS_TABLES&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    修改完之后 重新进入服务端即可</span><br></pre></td></tr></table></figure>

<h4 id="前期表准备（实例）"><a href="#前期表准备（实例）" class="headerlink" title="前期表准备（实例）"></a>前期表准备（实例）</h4><p>（针对下面一直到正则的查询语句）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">  <span class="built_in">id</span> <span class="built_in">int</span> <span class="keyword">not</span> null unique auto_increment,</span><br><span class="line">  name varchar(<span class="number">20</span>) <span class="keyword">not</span> null,</span><br><span class="line">  sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) <span class="keyword">not</span> null default <span class="string">&#x27;male&#x27;</span>, <span class="comment">#大部分是男的</span></span><br><span class="line">  age <span class="built_in">int</span>(<span class="number">3</span>) unsigned <span class="keyword">not</span> null default <span class="number">28</span>,</span><br><span class="line">  hire_date date <span class="keyword">not</span> null,</span><br><span class="line">  post varchar(<span class="number">50</span>),</span><br><span class="line">  post_comment varchar(<span class="number">100</span>),</span><br><span class="line">  salary double(<span class="number">15</span>,<span class="number">2</span>),</span><br><span class="line">  office <span class="built_in">int</span>, <span class="comment">#一个部门一个屋子</span></span><br><span class="line">  depart_id <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#插入记录</span></span><br><span class="line"><span class="comment">#三个部门：教学，销售，运营</span></span><br><span class="line">insert into emp(name,sex,age,hire_date,post,salary,office,depart_id) values</span><br><span class="line">(<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;20170301&#x27;</span>,<span class="string">&#x27;张江第一帅形象代言&#x27;</span>,<span class="number">7300.33</span>,<span class="number">401</span>,<span class="number">1</span>), <span class="comment">#以下是教学部</span></span><br><span class="line">(<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">78</span>,<span class="string">&#x27;20150302&#x27;</span>,<span class="string">&#x27;teacher&#x27;</span>,<span class="number">1000000.31</span>,<span class="number">401</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;kevin&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">81</span>,<span class="string">&#x27;20130305&#x27;</span>,<span class="string">&#x27;teacher&#x27;</span>,<span class="number">8300</span>,<span class="number">401</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;tony&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">73</span>,<span class="string">&#x27;20140701&#x27;</span>,<span class="string">&#x27;teacher&#x27;</span>,<span class="number">3500</span>,<span class="number">401</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;owen&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">28</span>,<span class="string">&#x27;20121101&#x27;</span>,<span class="string">&#x27;teacher&#x27;</span>,<span class="number">2100</span>,<span class="number">401</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;jack&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;20110211&#x27;</span>,<span class="string">&#x27;teacher&#x27;</span>,<span class="number">9000</span>,<span class="number">401</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;jenny&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;19000301&#x27;</span>,<span class="string">&#x27;teacher&#x27;</span>,<span class="number">30000</span>,<span class="number">401</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;sank&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">48</span>,<span class="string">&#x27;20101111&#x27;</span>,<span class="string">&#x27;teacher&#x27;</span>,<span class="number">10000</span>,<span class="number">401</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;哈哈&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">48</span>,<span class="string">&#x27;20150311&#x27;</span>,<span class="string">&#x27;sale&#x27;</span>,<span class="number">3000.13</span>,<span class="number">402</span>,<span class="number">2</span>),<span class="comment">#以下是销售部门</span></span><br><span class="line">(<span class="string">&#x27;呵呵&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">38</span>,<span class="string">&#x27;20101101&#x27;</span>,<span class="string">&#x27;sale&#x27;</span>,<span class="number">2000.35</span>,<span class="number">402</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;西西&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;20110312&#x27;</span>,<span class="string">&#x27;sale&#x27;</span>,<span class="number">1000.37</span>,<span class="number">402</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;乐乐&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;20160513&#x27;</span>,<span class="string">&#x27;sale&#x27;</span>,<span class="number">3000.29</span>,<span class="number">402</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;拉拉&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">28</span>,<span class="string">&#x27;20170127&#x27;</span>,<span class="string">&#x27;sale&#x27;</span>,<span class="number">4000.33</span>,<span class="number">402</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;僧龙&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">28</span>,<span class="string">&#x27;20160311&#x27;</span>,<span class="string">&#x27;operation&#x27;</span>,<span class="number">10000.13</span>,<span class="number">403</span>,<span class="number">3</span>), <span class="comment">#以下是运营部门</span></span><br><span class="line">(<span class="string">&#x27;程咬金&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;19970312&#x27;</span>,<span class="string">&#x27;operation&#x27;</span>,<span class="number">20000</span>,<span class="number">403</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">&#x27;程咬银&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;20130311&#x27;</span>,<span class="string">&#x27;operation&#x27;</span>,<span class="number">19000</span>,<span class="number">403</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">&#x27;程咬铜&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;20150411&#x27;</span>,<span class="string">&#x27;operation&#x27;</span>,<span class="number">18000</span>,<span class="number">403</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">&#x27;程咬铁&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;20140512&#x27;</span>,<span class="string">&#x27;operation&#x27;</span>,<span class="number">17000</span>,<span class="number">403</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当表字段特别多 展示的时候错乱 可以使用\G分行展示</span></span><br><span class="line">select * <span class="keyword">from</span> emp\G;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 个别同学的电脑在插入中文的时候还是会出现乱码或者空白的现象 你可以将字符编码统一设置成GBK</span></span><br></pre></td></tr></table></figure>

<h4 id="where筛选条件"><a href="#where筛选条件" class="headerlink" title="where筛选条件"></a>where筛选条件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 作用:是对整体数据的一个筛选操作</span></span><br><span class="line"><span class="comment"># 1.查询id大于等于3小于等于6的数据</span></span><br><span class="line">select <span class="built_in">id</span>,name,age <span class="keyword">from</span> emp where <span class="built_in">id</span>&gt;=<span class="number">3</span> <span class="keyword">and</span> <span class="built_in">id</span>&lt;=<span class="number">6</span>;</span><br><span class="line">select <span class="built_in">id</span>,name <span class="keyword">from</span> emp where <span class="built_in">id</span> between <span class="number">3</span> <span class="keyword">and</span> <span class="number">6</span>;  两者等价</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.查询薪资是20000或者18000或者17000的数据</span></span><br><span class="line">select * <span class="keyword">from</span> emp where salary=<span class="number">20000</span> <span class="keyword">or</span> salary=<span class="number">18000</span> <span class="keyword">or</span> salary=<span class="number">17000</span>;</span><br><span class="line">select * <span class="keyword">from</span> emp where salary <span class="keyword">in</span> (<span class="number">20000</span>,<span class="number">18000</span>,<span class="number">17000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.查询员工姓名中包含字母o的员工的姓名和薪资</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">模糊查询</span></span><br><span class="line"><span class="string">	like</span></span><br><span class="line"><span class="string">		%  匹配任意多个字符</span></span><br><span class="line"><span class="string">		_  匹配任意单个字符</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">select name,salary <span class="keyword">from</span> emp where name like <span class="string">&#x27;%o%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.查询员工姓名是由四个字符组成的 姓名和薪资  char_length()   _</span></span><br><span class="line">select name,salary <span class="keyword">from</span> emp where name like <span class="string">&#x27;____&#x27;</span>;</span><br><span class="line">select name,salary <span class="keyword">from</span> emp where char_length(name) = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.查询id小于3或者id大于6的数据</span></span><br><span class="line">select * <span class="keyword">from</span> emp where <span class="built_in">id</span> <span class="keyword">not</span> between <span class="number">3</span> <span class="keyword">and</span> <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.查询薪资不在20000,18000,17000范围的数据</span></span><br><span class="line">select * <span class="keyword">from</span> emp where salary <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">20000</span>,<span class="number">18000</span>,<span class="number">17000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.查询岗位描述为空的员工姓名和岗位名  针对null不用等号 用is</span></span><br><span class="line">select name,post <span class="keyword">from</span> emp where post_comment = NULL;</span><br><span class="line">select name,post <span class="keyword">from</span> emp where post_comment <span class="keyword">is</span> NULL;</span><br></pre></td></tr></table></figure>

<h4 id="group-by分组"><a href="#group-by分组" class="headerlink" title="group by分组"></a>group by分组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分组实际应用场景  分组应用场景非常的多</span></span><br><span class="line">	男女比例</span><br><span class="line">    部门平均薪资</span><br><span class="line">    部门秃头率</span><br><span class="line">    国家之间数据统计</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1	按照部门分组</span></span><br><span class="line">select * <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">分组之后 最小可操作单位应该是组 还不再是组内的单个数据</span></span><br><span class="line"><span class="string">	上述命令在你没有设置严格模式的时候是可正常执行的 返回的是分组之后 每个组的第一条数据 但是这不符合分组的规范:分组之后不应该考虑单个数据 而应该以组为操作单位(分组之后 没办法直接获取组内单个数据)</span></span><br><span class="line"><span class="string">	如果设置了严格模式 那么上述命令会直接报错 </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">set</span> <span class="keyword">global</span> sql_mode = <span class="string">&#x27;strict_trans_tables,only_full_group_by&#x27;</span>;</span><br><span class="line"></span><br><span class="line">设置严格模式之后  分组 默认只能拿到分组的依据</span><br><span class="line">select post <span class="keyword">from</span> emp group by post;  </span><br><span class="line">按照什么分组就只能拿到分组 其他字段不能直接获取 需要借助于一些方法(聚合函数)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">什么时候需要分组啊？？？</span></span><br><span class="line"><span class="string">	关键字 </span></span><br><span class="line"><span class="string">		每个 平均 最高 最低 </span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">	聚合函数</span></span><br><span class="line"><span class="string">		max</span></span><br><span class="line"><span class="string">		min</span></span><br><span class="line"><span class="string">		sum</span></span><br><span class="line"><span class="string">		count</span></span><br><span class="line"><span class="string">		avg</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 1.获取每个部门的最高薪资</span></span><br><span class="line">select post,<span class="built_in">max</span>(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line">select post <span class="keyword">as</span> <span class="string">&#x27;部门&#x27;</span>,<span class="built_in">max</span>(salary) <span class="keyword">as</span> <span class="string">&#x27;最高薪资&#x27;</span> <span class="keyword">from</span> emp group by post;</span><br><span class="line">select post <span class="string">&#x27;部门&#x27;</span>,<span class="built_in">max</span>(salary) <span class="string">&#x27;最高薪资&#x27;</span> <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># as可以给字段起别名 也可以直接省略不写 但是不推荐 因为省略的话语意不明确 容易错乱</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.获取每个部门的最低薪资</span></span><br><span class="line">select post,<span class="built_in">min</span>(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># 3.获取每个部门的平均薪资</span></span><br><span class="line">select post,avg(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># 4.获取每个部门的工资总和</span></span><br><span class="line">select post,<span class="built_in">sum</span>(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># 5.获取每个部门的人数</span></span><br><span class="line">select post,count(<span class="built_in">id</span>) <span class="keyword">from</span> emp group by post;  <span class="comment"># 常用 符合逻辑</span></span><br><span class="line">select post,count(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line">select post,count(age) <span class="keyword">from</span> emp group by post;</span><br><span class="line">select post,count(post_comment) <span class="keyword">from</span> emp group by post;  null不行</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.查询分组之后的部门名称和每个部门下所有的员工姓名 </span></span><br><span class="line"><span class="comment"># group_concat不单单可以支持你获取分组之后的其他字段值 还支持拼接操作</span></span><br><span class="line">select post,group_concat(name) <span class="keyword">from</span> emp group by post;</span><br><span class="line">select post,group_concat(name,<span class="string">&#x27;_DSB&#x27;</span>) <span class="keyword">from</span> emp group by post;</span><br><span class="line">select post,group_concat(name,<span class="string">&#x27;:&#x27;</span>,salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># concat不分组的时候用 </span></span><br><span class="line">select concat(<span class="string">&#x27;NAME:&#x27;</span>,name),concat(<span class="string">&#x27;SAL:&#x27;</span>,salary) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 补充 as语法不单单可以给字段起别名 还可以给表临时起别名</span></span><br><span class="line">select emp.<span class="built_in">id</span>,emp.name <span class="keyword">from</span> emp;  </span><br><span class="line">select emp.<span class="built_in">id</span>,emp.name <span class="keyword">from</span> emp <span class="keyword">as</span> t1;   报错</span><br><span class="line">select t1.<span class="built_in">id</span>,t1.name <span class="keyword">from</span> emp <span class="keyword">as</span> t1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询每个人的年薪  12薪</span></span><br><span class="line">select name,salary*<span class="number">12</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h4 id="分组注意事项"><a href="#分组注意事项" class="headerlink" title="分组注意事项"></a>分组注意事项</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关键字where和group by同时出现的时候group by必须在where的后面</span></span><br><span class="line">where先对整体数据进行过滤之后再分组操作</span><br><span class="line">where筛选条件不能使用聚合函数</span><br><span class="line">select <span class="built_in">id</span>,name,age <span class="keyword">from</span> emp where <span class="built_in">max</span>(salary) &gt; <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line">select <span class="built_in">max</span>(salary) <span class="keyword">from</span> emp;  <span class="comment"># 不分组 默认整体就是一组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计各部门年龄在30岁以上的员工平均薪资</span></span><br><span class="line">	<span class="number">1</span> 先求所有年龄大于<span class="number">30</span>岁的员工</span><br><span class="line">    	select * <span class="keyword">from</span> emp where age&gt;<span class="number">30</span>;</span><br><span class="line">    <span class="number">2</span> 再对结果进行分组</span><br><span class="line">     	select * <span class="keyword">from</span> emp where age&gt;<span class="number">30</span> group by post;</span><br><span class="line">    </span><br><span class="line">    select post,avg(salary) <span class="keyword">from</span> emp where age&gt;<span class="number">30</span> group by post;</span><br></pre></td></tr></table></figure>

<h4 id="having分组之后的筛选条件"><a href="#having分组之后的筛选条件" class="headerlink" title="having分组之后的筛选条件"></a>having分组之后的筛选条件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">having的语法根where是一致的</span></span><br><span class="line"><span class="string">只不过having是在分组之后进行的过滤操作</span></span><br><span class="line"><span class="string">即having是可以直接使用聚合函数的</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 统计各部门年龄在30岁以上的员工平均工资并且保留平均薪资大于10000的部门</span></span><br><span class="line">select post,avg(salary) <span class="keyword">from</span> emp </span><br><span class="line">		where age&gt;<span class="number">30</span> </span><br><span class="line">    	group by post</span><br><span class="line">        having avg(salary) &gt; <span class="number">10000</span></span><br><span class="line">        ;</span><br></pre></td></tr></table></figure>

<h4 id="distinct去重"><a href="#distinct去重" class="headerlink" title="distinct去重"></a>distinct去重</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">一定要注意 必须是完全一样的数据才可以去重！！！</span></span><br><span class="line"><span class="string">一定不要将逐渐忽视了 有逐渐存在的情况下 是不可能去重的</span></span><br><span class="line"><span class="string">[</span></span><br><span class="line"><span class="string">&#123;&#x27;id&#x27;:1,&#x27;name&#x27;:&#x27;jason&#x27;,&#x27;age&#x27;:18&#125;,</span></span><br><span class="line"><span class="string">&#123;&#x27;id&#x27;:2,&#x27;name&#x27;:&#x27;jason&#x27;,&#x27;age&#x27;:18&#125;,</span></span><br><span class="line"><span class="string">&#123;&#x27;id&#x27;:3,&#x27;name&#x27;:&#x27;egon&#x27;,&#x27;age&#x27;:18&#125;</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string">ORM  对象关系映射   让不懂SQL语句的人也能够非常牛逼的操作数据库</span></span><br><span class="line"><span class="string">表								类</span></span><br><span class="line"><span class="string">一条条的数据						对象</span></span><br><span class="line"><span class="string">字段对应的值						对象的属性</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">你再写类 就意味着在创建表</span></span><br><span class="line"><span class="string">用类生成对象 就意味着再创建数据</span></span><br><span class="line"><span class="string">对象点属性 就是在获取数据字段对应的值</span></span><br><span class="line"><span class="string">目的就是减轻python程序员的压力 只需要会python面向对象的知识点就可以操作MySQL</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">select distinct <span class="built_in">id</span>,age <span class="keyword">from</span> emp;</span><br><span class="line">select distinct age <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h4 id="order-by排序"><a href="#order-by排序" class="headerlink" title="order by排序"></a>order by排序</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> emp order by salary;</span><br><span class="line">select * <span class="keyword">from</span> emp order by salary asc;</span><br><span class="line">select * <span class="keyword">from</span> emp order by salary desc;</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">order by默认是升序  asc 该asc可以省略不写</span></span><br><span class="line"><span class="string">也可以修改为降序     desc</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">select * <span class="keyword">from</span> emp order by age desc,salary asc;</span><br><span class="line"><span class="comment"># 先按照age降序排  如果碰到age相同 则再按照salary升序排</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计各部门年龄在10岁以上的员工平均工资并且保留平均薪资大于1000的部门,然后对平均工资降序排序</span></span><br><span class="line">	select post,avg(salary) <span class="keyword">from</span> emp </span><br><span class="line">		where age&gt;<span class="number">10</span> </span><br><span class="line">    	group by post</span><br><span class="line">        having avg(salary) &gt; <span class="number">1000</span></span><br><span class="line">        order by avg(salary) desc</span><br><span class="line">        ;</span><br></pre></td></tr></table></figure>

<h4 id="limit限制展示条数"><a href="#limit限制展示条数" class="headerlink" title="limit限制展示条数"></a>limit限制展示条数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> emp;</span><br><span class="line"><span class="string">&quot;&quot;&quot;针对数据过多的情况 我们通常都是做分页处理&quot;&quot;&quot;</span></span><br><span class="line">select * <span class="keyword">from</span> emp limit <span class="number">3</span>;  <span class="comment"># 只展示三条数据</span></span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> emp limit <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line">select * <span class="keyword">from</span> emp limit <span class="number">5</span>,<span class="number">5</span>;</span><br><span class="line">第一个参数是起始位置</span><br><span class="line">第二个参数是展示条数</span><br></pre></td></tr></table></figure>

<h4 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> emp where name regexp <span class="string">&#x27;^j.*(n|y)$&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h4 id="多表操作"><a href="#多表操作" class="headerlink" title="多表操作"></a>多表操作</h4><p>前期表准备</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#建表</span></span><br><span class="line">create table dep(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">name varchar(<span class="number">20</span>) </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) <span class="keyword">not</span> null default <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">age <span class="built_in">int</span>,</span><br><span class="line">dep_id <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#插入数据</span></span><br><span class="line">insert into dep values</span><br><span class="line">(<span class="number">200</span>,<span class="string">&#x27;技术&#x27;</span>),</span><br><span class="line">(<span class="number">201</span>,<span class="string">&#x27;人力资源&#x27;</span>),</span><br><span class="line">(<span class="number">202</span>,<span class="string">&#x27;销售&#x27;</span>),</span><br><span class="line">(<span class="number">203</span>,<span class="string">&#x27;运营&#x27;</span>);</span><br><span class="line"></span><br><span class="line">insert into emp(name,sex,age,dep_id) values</span><br><span class="line">(<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="number">200</span>),</span><br><span class="line">(<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">48</span>,<span class="number">201</span>),</span><br><span class="line">(<span class="string">&#x27;kevin&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="number">201</span>),</span><br><span class="line">(<span class="string">&#x27;nick&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">28</span>,<span class="number">202</span>),</span><br><span class="line">(<span class="string">&#x27;owen&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="number">203</span>),</span><br><span class="line">(<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">18</span>,<span class="number">204</span>);</span><br></pre></td></tr></table></figure>

<h4 id="表查询"><a href="#表查询" class="headerlink" title="表查询"></a>表查询</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> dep,emp;  <span class="comment"># 结果   笛卡尔积</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">了解即可 不知道也没关系</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> emp,dep where emp.dep_id = dep.<span class="built_in">id</span>;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">MySQL也知道 你在后面查询数据过程中 肯定会经常用到拼表操作 </span></span><br><span class="line"><span class="string">所以特地给你开设了对应的方法</span></span><br><span class="line"><span class="string">	inner join  内连接</span></span><br><span class="line"><span class="string">	left join   左连接</span></span><br><span class="line"><span class="string">	right join  右连接</span></span><br><span class="line"><span class="string">	union		全连接</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># inner join  内连接</span></span><br><span class="line">select * <span class="keyword">from</span> emp inner join dep on emp.dep_id = dep.<span class="built_in">id</span>;</span><br><span class="line"><span class="comment"># 只拼接两张表中公有的数据部分</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># left join   左连接</span></span><br><span class="line">select * <span class="keyword">from</span> emp left join dep on emp.dep_id = dep.<span class="built_in">id</span>;</span><br><span class="line"><span class="comment"># 左表所有的数据都展示出来 没有对应的项就用NULL</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># right join  右连接</span></span><br><span class="line">select * <span class="keyword">from</span> emp right join dep on emp.dep_id = dep.<span class="built_in">id</span>;</span><br><span class="line"><span class="comment"># 右表所有的数据都展示出来 没有对应的项就用NULL</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># union		全连接  左右两表所有的数据都展示出来</span></span><br><span class="line">select * <span class="keyword">from</span> emp left join dep on emp.dep_id = dep.<span class="built_in">id</span></span><br><span class="line">union</span><br><span class="line">select * <span class="keyword">from</span> emp right join dep on emp.dep_id = dep.<span class="built_in">id</span>;</span><br></pre></td></tr></table></figure>

<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">子查询就是我们平时解决问题的思路</span></span><br><span class="line"><span class="string">	分步骤解决问题</span></span><br><span class="line"><span class="string">		第一步</span></span><br><span class="line"><span class="string">		第二步</span></span><br><span class="line"><span class="string">		...</span></span><br><span class="line"><span class="string">将一个查询语句的结果当做另外一个查询语句的条件去用</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 查询部门是技术或者人力资源的员工信息</span></span><br><span class="line">	<span class="number">1</span> 先获取部门的<span class="built_in">id</span>号</span><br><span class="line">    <span class="number">2</span> 再去员工表里面筛选出对应的员工</span><br><span class="line">    select <span class="built_in">id</span> <span class="keyword">from</span> dep where name=<span class="string">&#x27;技术&#x27;</span> <span class="keyword">or</span> name = <span class="string">&#x27;人力资源&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    select name <span class="keyword">from</span> emp where dep_id <span class="keyword">in</span> (<span class="number">200</span>,<span class="number">201</span>);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    select * <span class="keyword">from</span> emp where dep_id <span class="keyword">in</span> (select <span class="built_in">id</span> <span class="keyword">from</span> dep where name=<span class="string">&#x27;技术&#x27;</span> <span class="keyword">or</span> name = <span class="string">&#x27;人力资源&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>总结</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">表的查询结果可以作为其他表的查询条件</span><br><span class="line">也可以通过起别名的方式把它作为一个张虚拟表根其他表关联</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">多表查询就两种方式</span></span><br><span class="line"><span class="string">	先拼接表再查询</span></span><br><span class="line"><span class="string">	子查询 一步一步来</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="将查询结果插入到其它表中"><a href="#将查询结果插入到其它表中" class="headerlink" title="将查询结果插入到其它表中"></a>将查询结果插入到其它表中</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">例：</span><br><span class="line">	-- 将查询结果插入到good_cates表中</span><br><span class="line">	insert into good_cates(name) select cate_name from goods group by cate_name;</span><br><span class="line"></span><br><span class="line">使用连接更新表中某个字段数据	</span><br><span class="line">	将goods表中的分类名称更改成商品分类表中对应的分类id</span><br><span class="line">	-- 查看goods表中的商品分类名称对应的商品分类id</span><br><span class="line">	select * from goods inner join good_cates on goods.cate_name = good_cates.name;</span><br><span class="line"></span><br><span class="line">-- 把该语句中from 后的语句理解为一张虚表  </span><br><span class="line">update goods g inner join good_cates gc on g.cate_name=gc.name set g.cate_name=gc.id;</span><br><span class="line"></span><br><span class="line">更改表字段名（修改表结构）</span><br><span class="line">	修改表结构可以使用: alter table 语句，多个修改字段之间使用逗号分隔</span><br><span class="line">	alter table goods change cate_name cate_id int not null, change brand_name brand_id int not null;</span><br></pre></td></tr></table></figure>



<h2 id="pymsql"><a href="#pymsql" class="headerlink" title="pymsql"></a>pymsql</h2><h3 id="python调用mysql"><a href="#python调用mysql" class="headerlink" title="python调用mysql"></a>python调用mysql</h3><p>pip3 install pymysql(用pip安装pymysql模块)</p>
<p>python调用mysql接口分为六步：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1.导包</span><br><span class="line">2.创建连接对象</span><br><span class="line">3.获取游标，目的就是要执行sql语句</span><br><span class="line">4.执行sql语句</span><br><span class="line">5.关闭游标</span><br><span class="line">6.关闭连接</span><br><span class="line">对应代码：</span><br><span class="line">	导包</span><br><span class="line">		import pymysql</span><br><span class="line">	创建连接对象</span><br><span class="line">		pymysql.connect(参数列表)</span><br><span class="line">	获取游标对象</span><br><span class="line">		cursor =conn.cursor()</span><br><span class="line">	执行SQL语句</span><br><span class="line">		row_count = cursor.execute(sql)</span><br><span class="line">	获取查询结果集</span><br><span class="line">		result = cursor.fetchall()</span><br><span class="line">	将修改操作提交到数据库</span><br><span class="line">		conn.commit()</span><br><span class="line">	回滚数据</span><br><span class="line">		conn.rollback()</span><br><span class="line">	关闭游标</span><br><span class="line">		cursor.close()</span><br><span class="line">	关闭连接</span><br><span class="line">		conn.close()</span><br><span class="line">	导入 pymysql 包</span><br><span class="line">		import pymysql</span><br></pre></td></tr></table></figure>

<h3 id="创建连接对象"><a href="#创建连接对象" class="headerlink" title="创建连接对象"></a>创建连接对象</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">调用pymysql模块中的connect()函数来创建连接对象,代码如下:</span><br><span class="line">	 conn=connect(参数列表)</span><br><span class="line"></span><br><span class="line">	 * 参数host：连接的mysql主机，如果本机是&#x27;localhost&#x27;</span><br><span class="line">	 * 参数port：连接的mysql主机的端口，默认是3306</span><br><span class="line">	 * 参数user：连接的用户名</span><br><span class="line">	 * 参数password：连接的密码</span><br><span class="line">	 * 参数database：数据库的名称</span><br><span class="line">	 * 参数charset：通信采用的编码方式，推荐使用utf8</span><br><span class="line">	连接对象操作说明:</span><br><span class="line">		关闭连接 conn.close()</span><br><span class="line">		提交数据 conn.commit()</span><br><span class="line">		撤销数据 conn.rollback()</span><br><span class="line">获取游标对象：</span><br><span class="line">	获取游标对象的目标就是要执行sql语句，完成对数据库的增、删、改、查操作。代码如下:</span><br><span class="line">	 # 调用连接对象的cursor()方法获取游标对象   </span><br><span class="line">	 cur =conn.cursor()</span><br><span class="line">	游标操作说明:</span><br><span class="line">		使用游标执行SQL语句: execute(operation [parameters ]) 执行SQL语句，返回受影响的行数，主要用于执行insert、update、delete、select等语句</span><br><span class="line">		获取查询结果集中的一条数据:cur.fetchone()返回一个元组, 如 (1,&#x27;张三&#x27;)</span><br><span class="line">		获取查询结果集中的所有数据: cur.fetchall()返回一个元组,如((1,&#x27;张三&#x27;),(2,&#x27;李四&#x27;))</span><br><span class="line">		关闭游标: cur.close(),表示和数据库操作完成</span><br></pre></td></tr></table></figure>

<h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line">	# 创建连接对象</span><br><span class="line">	conn = pymysql.connect(host=&#x27;localhost&#x27;, port=3306, user=&#x27;root&#x27;, password=&#x27;mysql&#x27;,database=&#x27;python&#x27;, charset=&#x27;utf8&#x27;)</span><br><span class="line">	# 获取游标对象</span><br><span class="line">	cursor = conn.cursor()</span><br><span class="line">	# 查询 SQL 语句</span><br><span class="line">	sql = &quot;select * from students;&quot;</span><br><span class="line">	# 执行 SQL 语句 返回值就是 SQL 语句在执行过程中影响的行数</span><br><span class="line">	row_count = cursor.execute(sql)</span><br><span class="line">	print(&quot;SQL 语句执行影响的行数%d&quot; % row_count)</span><br><span class="line">	# 取出结果集中一行数据,　例如:(1, &#x27;张三&#x27;)</span><br><span class="line">	# print(cursor.fetchone())</span><br><span class="line">	# 取出结果集中的所有数据, 例如:((1, &#x27;张三&#x27;), (2, &#x27;李四&#x27;), (3, &#x27;王五&#x27;))</span><br><span class="line">	for line in cursor.fetchall():</span><br><span class="line">		print(line)</span><br><span class="line">	# 关闭游标</span><br><span class="line">	cursor.close()</span><br><span class="line">	# 关闭连接</span><br><span class="line">	conn.close()</span><br><span class="line">添加（修改）sql数据:</span><br><span class="line">	import pymysql</span><br><span class="line">	conn=pymysql.connect(host=&quot;10.10.10.85&quot;,</span><br><span class="line">					port=3306,</span><br><span class="line">					user=&quot;root&quot;,</span><br><span class="line">					password=&quot;123456&quot;,</span><br><span class="line">					database=&quot;python&quot;,</span><br><span class="line">					charset=&quot;utf8&quot;)</span><br><span class="line">	cursor =conn.cursor()</span><br><span class="line">	sql = &quot;insert into students(name) values(&#x27;张三&#x27;);&quot;</span><br><span class="line">	try:</span><br><span class="line">		row_count=cursor.execute(sql)</span><br><span class="line">		print(&quot;SQL 语句执行影响的行数%d&quot; % row_count)</span><br><span class="line">		conn.commit()</span><br><span class="line">	except Exception as e:</span><br><span class="line">		conn.rollback()</span><br><span class="line">	finally:</span><br><span class="line">		cursor.close()</span><br><span class="line">		conn.close()</span><br></pre></td></tr></table></figure>

<h3 id="防止SQL注入"><a href="#防止SQL注入" class="headerlink" title="防止SQL注入"></a>防止SQL注入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	什么是SQL注入?</span><br><span class="line">​	用户提交带有恶意的数据与SQL语句进行字符串方式的拼接，从而影响了SQL语句的语义，最终产生数据泄露的现象。</span><br><span class="line">​	如何防止SQL注入?</span><br><span class="line">​	SQL语句参数化</span><br><span class="line">​	SQL语言中的参数使用%s来占位，此处不是python中的字符串格式化操作</span><br><span class="line">​	将SQL语句中%s占位所需要的参数存在一个列表中，把参数列表传递给execute方法中第二个参数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="防止SQL注入的示例代码"><a href="#防止SQL注入的示例代码" class="headerlink" title="防止SQL注入的示例代码:"></a>防止SQL注入的示例代码:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">利用一些语法的特性 书写一些特点的语句实现固定的语法</span><br><span class="line">MySQL利用的是MySQL的注释语法</span><br><span class="line">select * from user where name=&#x27;jason&#x27; -- jhsadklsajdkla&#x27; and password=&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">select * from user where name=&#x27;xxx&#x27; or 1=1 -- sakjdkljakldjasl&#x27; and password=&#x27;&#x27;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">#日常生活中很多软件在注册的时候都不能含有特殊符号</span><br><span class="line">#因为怕你构造出特定的语句入侵数据库 不安全</span><br><span class="line"></span><br><span class="line"># 敏感的数据不要自己做拼接 交给execute帮你拼接即可</span><br><span class="line"># 结合数据库完成一个用户的登录功能？</span><br><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn = pymysql.connect(</span><br><span class="line">    host = &#x27;127.0.0.1&#x27;,</span><br><span class="line">    port = 3306,</span><br><span class="line">    user = &#x27;root&#x27;,</span><br><span class="line">    password = &#x27;123456&#x27;,</span><br><span class="line">    database = &#x27;day48&#x27;,</span><br><span class="line">    charset = &#x27;utf8&#x27;  # 编码千万不要加-</span><br><span class="line">)  # 链接数据库</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">username = input(&#x27;&gt;&gt;&gt;:&#x27;)</span><br><span class="line">password = input(&#x27;&gt;&gt;&gt;:&#x27;)</span><br><span class="line">sql = &quot;select * from user where name=%s and password=%s&quot;</span><br><span class="line"># 不要手动拼接数据 先用%s占位 之后将需要拼接的数据直接交给execute方法即可</span><br><span class="line">print(sql)</span><br><span class="line">rows = cursor.execute(sql,(username,password))  # 自动识别sql里面的%s用后面元组里面的数据替换</span><br><span class="line">if rows:</span><br><span class="line">    print(&#x27;登录成功&#x27;)</span><br><span class="line">    print(cursor.fetchall())</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;用户名密码错误&#x27;)</span><br></pre></td></tr></table></figure>

<p>这里防止sql注入的主要方法是这句，rows = cursor.execute(sql,(username,password))  ，用execute自带的拼接方式来做防止注入。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/11/18/mysql%20for%20python_hexo/" data-id="ckxjra7p70016r0v19crdewzy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/11/18/IO%E6%A8%A1%E5%9E%8B_hexo/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          IO模型
        
      </div>
    </a>
  
  
    <a href="/2021/11/18/socket_hexo/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">socket</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexoblog%E6%B7%BB%E5%8A%A0hexo%E6%A0%87%E7%AD%BE/">hexoblog添加hexo标签</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python%E4%BB%A3%E7%A0%81/">python代码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python%E4%BB%A3%E7%A0%81/" rel="tag">python代码</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Python/" style="font-size: 17.5px;">Python</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/python%E4%BB%A3%E7%A0%81/" style="font-size: 12.5px;">python代码</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/12/23/Linux%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E6%97%A5%E5%BF%97%E5%AE%A1%E8%AE%A1_hexo/">Linux用户行为日志审计</a>
          </li>
        
          <li>
            <a href="/2021/12/23/HTTP_hexo/">HTTP</a>
          </li>
        
          <li>
            <a href="/2021/12/23/Zabbix_hexo/">Zabbix</a>
          </li>
        
          <li>
            <a href="/2021/12/23/NFS_hexo/">NFS</a>
          </li>
        
          <li>
            <a href="/2021/12/23/firewalld_hexo/">firewalld</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>